(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["subscribe"],{"36c1":function(e){e.exports=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"oracleName",type:"string"},{indexed:!1,internalType:"address",name:"contractAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"extendTime",type:"uint256"},{indexed:!1,internalType:"uint256",name:"ratePerDay",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payValue",type:"uint256"},{indexed:!1,internalType:"string",name:"tokenName",type:"string"}],name:"Purchase",type:"event"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"oracleName",type:"string"},{internalType:"address",name:"contractAddress",type:"address"},{internalType:"uint256",name:"payValue",type:"uint256"}],name:"purchaseByKookle",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawKookle",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAddress",type:"address"}],name:"updateKookleTokenAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAddress",type:"address"}],name:"updateActiveDirectoryAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"oracleName",type:"string"},{internalType:"uint256",name:"ratePerDay",type:"uint256"},{internalType:"uint256",name:"minimumExtendTime",type:"uint256"}],name:"updatePurchaseSetting",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"oracleName",type:"string"}],name:"getPurchaseSetting",outputs:[{components:[{internalType:"uint256",name:"ratePerDay",type:"uint256"},{internalType:"uint256",name:"minimumExtendTime",type:"uint256"},{internalType:"uint256",name:"created",type:"uint256"},{internalType:"uint256",name:"updated",type:"uint256"}],internalType:"struct SubscribeOracle.OraclePurchaseSetting",name:"",type:"tuple"}],stateMutability:"view",type:"function",constant:!0}]},"51ec":function(e,t,n){},"5b91":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e.isShowAlert?n("div",{staticClass:"box-alert",class:{success:e.isTransactionSuccess,error:!e.isTransactionSuccess}},[n("i",{staticClass:"el-icon-close close-icon",on:{click:function(t){e.isShowAlert=!1}}}),n("div",{staticStyle:{display:"flex","flex-direction":"row"}},[n("div",{staticStyle:{width:"160px"}},[e.isTransactionSuccess?n("span",[n("i",{staticClass:"el-icon-success"}),e._v(" SUCCESS\n        ")]):n("span",[n("i",{staticClass:"el-icon-error"}),e._v(" FAILED")])]),n("div",{staticStyle:{"padding-top":"5px"}},[n("span",{staticStyle:{color:"#dddddd","font-size":"15px"}},[e._v("\n          View detail on\n          "),n("a",{staticStyle:{color:"#dddddd"},attrs:{href:e.BscScanUrl+"/tx/"+e.txId,target:"_blank"}},[e._v("BscScan\n            "),n("i",{staticClass:"el-icon-link font-bold",staticStyle:{"font-size":"18px"}})])])])])]):e._e(),e._m(0),n("div",{staticClass:"subscribe-content"},[n("h3",{staticClass:"h1-label text-color-gredient font-bold",staticStyle:{width:"100%"}},[e._v("THAI GOVERNMENT LOTTERY")]),n("div",{staticClass:"input-subscribe"},[n("div",{staticClass:"text-color-gredient font-bold input-subscribe-label"},[e._v("D-App Address")]),n("el-input",{on:{input:e.onInputDAppAddress},model:{value:e.dAppAddress,callback:function(t){e.dAppAddress=t},expression:"dAppAddress"}})],1),n("div",{staticClass:"input-subscribe"},[n("div",{staticClass:"text-color-gredient font-bold input-subscribe-label"},[e._v("Purchase Day")]),n("el-input",{on:{input:e.filterNumberOnly},model:{value:e.purchaseDay,callback:function(t){e.purchaseDay=t},expression:"purchaseDay"}}),parseInt(e.purchaseDay)>0?n("div",{staticClass:"purchase-price-detail"},[e._v("\n        "+e._s(e.purchaseDay)+" Day = "+e._s(e.calculateKookleByPurchaseDay())+" KOOKL\n      ")]):e._e()],1),n("div",[0===parseInt(e.allowance)?n("div",[n("el-button",{staticStyle:{"font-size":"20px",width:"100%","border-radius":"10px"},attrs:{type:"primary"},on:{click:e.onApproveKookleTokenButtonClick}},[e._v("Approve")])],1):n("div",[n("el-button",{class:{"btn-disable":e.isDisableSubscribeButton},staticStyle:{"font-size":"20px",width:"100%","border-radius":"10px"},attrs:{disabled:e.isDisableSubscribeButton,type:"primary"},on:{click:e.onSubscribeOracleButtonClick}},[e._v("Subscribe")])],1)])])])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"h1-label text-color-gredient font-normal",staticStyle:{"text-align":"center",width:"100%"}},[e._v("SUBSCRIBE ORACLE")])])}],i=(n("a481"),n("6b54"),n("96cf"),n("3b8d")),r=n("2ef0"),c=n("99e5"),u=n.n(c),o=n("bc7d"),l=n("36c1"),p="0x888AC09a9698e4961DeEf6467370C87DAaC9E115",d="0x8E085F81d647D65E3b62f793Ee1ef4196039F85b",h="ORACLE_LOTTERY_THAI",y="https://testnet.bscscan.com",b={name:"SubscribeLotteryThai",data:function(){return{BscScanUrl:y,web3:null,eth:null,contract:null,isWalletConnected:!1,accountAddressList:[],currentAddress:"",allowance:!1,kookleTokenInstance:null,subscribeOracleInstance:null,dAppAddress:"",purchaseDay:"",purchaseAmount:"",isDisableSubscribeButton:!0,purchaseSetting:{ratePerDay:0,minExtendTime:1},payValue:0,txId:"",isShowAlert:!1,isTransactionSuccess:!0}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.eth=window.ethereum,this.isWalletConnected){e.next=4;break}return e.next=4,this.connectWallet();case 4:return e.prev=4,this.web3=new u.a(this.eth),this.kookleTokenInstance=new this.web3.eth.Contract(o,p),this.subscribeOracleInstance=new this.web3.eth.Contract(l,d),e.next=10,this.kookleTokenInstance.methods.allowance(this.currentAddress,d).call();case 10:return this.allowance=e.sent,e.next=13,this.subscribeOracleInstance.methods.getPurchaseSetting(h).call();case 13:t=e.sent,n=Object(r["get"])(t,"[0]","1000000000000000000"),this.purchaseSetting.ratePerDay=this.web3.utils.fromWei(n),this.purchaseSetting.minExtendTime=Object(r["get"])(t,"[1]",1),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](4),console.log(e.t0.message);case 22:case"end":return e.stop()}}),e,this,[[4,19]])})));function t(){return e.apply(this,arguments)}return t}(),methods:{connectWallet:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ethEnabled();case 2:return this.isWalletConnected=e.sent,e.next=5,window.web3.eth.getAccounts();case 5:this.accountAddressList=e.sent,this.currentAddress=this.accountAddressList[0];case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),ethEnabled:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=5;break}return window.web3=new u.a(window.ethereum),e.next=4,window.ethereum.enable();case 4:return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onApproveKookleTokenButtonClick:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this.web3.utils.toWei("1000000000"),e.next=4,this.kookleTokenInstance.methods.approve(d,t).send({from:this.currentAddress});case 4:return e.next=6,this.kookleTokenInstance.methods.allowance(this.currentAddress,d).call();case 6:this.allowance=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),this.isTransactionSuccess=!1,this.isShowAlert=!0;case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),onSubscribeOracleButtonClick:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.purchaseDay){e.next=3;break}return alert("Please enter purchase day"),e.abrupt("return",!1);case 3:return e.prev=3,t=this.web3.utils.toWei(this.payValue.toString()),e.next=7,this.subscribeOracleInstance.methods.purchaseByKookle(h,this.dAppAddress,t).send({from:this.currentAddress});case 7:n=e.sent,this.txId=Object(r["get"])(n,"transactionHash",""),this.isShowAlert=!0,this.isTransactionSuccess=!0,e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](3),this.isTransactionSuccess=!1,this.isShowAlert=!0;case 17:case"end":return e.stop()}}),e,this,[[3,13]])})));function t(){return e.apply(this,arguments)}return t}(),onInputDAppAddress:function(){this.isDisableSubscribeButton=this.validateIsSubscribeButtonDisable()},filterNumberOnly:function(){this.purchaseDay=this.purchaseDay.replace(/[^0-9]+/g,""),this.isDisableSubscribeButton=this.validateIsSubscribeButtonDisable()},validateIsSubscribeButtonDisable:function(){return!(""!==this.dAppAddress&&""!==this.purchaseDay&&parseInt(this.purchaseDay)>=parseInt(this.purchaseSetting.minExtendTime))},calculateKookleByPurchaseDay:function(){var e=parseInt(this.purchaseDay),t=parseInt(this.purchaseSetting.ratePerDay);return this.payValue=e*t,this.payValue}}},m=b,w=(n("c489"),n("2877")),f=Object(w["a"])(m,s,a,!1,null,"d154cd10",null);t["default"]=f.exports},c489:function(e,t,n){"use strict";n("51ec")}}]);
//# sourceMappingURL=subscribe.7ff8ad7f.js.map